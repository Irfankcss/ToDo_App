<div class="container py-4">
  <h1 class="mb-4">TODO List</h1>

  <div class="mb-3">
    <%= link_to "New Task", new_task_path, class: "btn btn-primary" %>
  </div>

  <div class="mb-3">
    <h4>Filter:</h4>
    <%= link_to "Show All", tasks_path, class: "btn btn-outline-secondary btn-sm me-2" %>
    <%= link_to "Show Done Tasks", tasks_path(filter: "done"), class: "btn btn-outline-success btn-sm me-2" %>
    <%= link_to "Show To do", tasks_path(filter: "not_done"), class: "btn btn-outline-warning btn-sm" %>
  </div>

  <h5>Active tasks: <span class="badge bg-info text-dark"><%= @active_tasks.count %></span></h5>

  <ul class="list-group mt-3">
    <% @tasks.each do |task| %>
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <div>
          <strong><%= task.title %></strong>
          <small class="text-muted ms-2">
            <%= task.timestamp.strftime("%d.%m.%Y %H:%M") if task.timestamp %>
          </small>
          <span class="badge bg-<%= task.done ? "success" : "warning" %> ms-2">
            <%= task.done ? "Done" : "To do" %>
          </span>
        </div>
        <div>
          <%= link_to "Edit", edit_task_path(task), class: "btn btn-sm btn-outline-primary me-2" %>
          <%= button_to "Delete", task_path(task), method: :delete, data: { turbo: false, confirm: "Are you sure?" }, class: "btn btn-sm btn-outline-danger" %>
        </div>
      </li>
    <% end %>
  </ul>
</div>
